{"version":3,"sources":["lib/sakurascript.coffee","lib/sakurascript.js"],"names":["SakuraScript","SakuraScriptToken","joinargs","splitargs","slice","extend","child","parent","ctor","this","constructor","key","hasProp","call","prototype","__super__","hasOwnProperty","str","replace","all","quoted","split","map","arg","args","test","join","tokens1","tokens","fromObject","json","i","len","token","length","push","parse","script","ref","tag","tags","re","_this","group","j","offset","arguments","match","toObject","results","toSakuraScript","instance","Object","keys","class_name","toString","class","Error","Scope","superClass","scope","view","Surface","surface","SurfaceAlias","surface_alias","Balloon","balloon","PlayAnimation","animation","PlayAnimationWait","SimpleWait","period","PreciseWait","WaitFromBeginning","ResetBeginning","WaitAnimationEnd","id","ToggleQuick","ToggleSynchronize","scopes","TimeCritical","WaitClick","noclear","NoChoiceTimeout","EventChoice","text","event","references","concat","ReferencesChoice","ScriptChoice","script1","OldReferenceChoice","reference","BeginEventChoice","BeginReferencesChoice","BeginScriptChoice","EndChoice","BeginEventAnchor","BeginReferencesAnchor","BeginScriptAnchor","EndAnchor","LineBreak","HalfLineBreak","PercentLineBreak","percent","ToggleNoAutoLineBreak","Location","x1","y1","x","y","Image","path","args1","InlineImage","Font","name","BeFar","BeNear","Clear","End","OldChoiceEnd","OpenCommunicateBox","OpenTeachBox","Halt","Marker","Char","raw_char","EscapeChar","UCSChar","code_point","AsciiChar","EntityChar","entity","Animation","command","Bind","category","parts","dress_up","Number","LockRepaint","UnlockRepaint","Move","duration","origin_type","source_origin","target_origin","MoveAsync","apply","MoveAsyncCancel","Raise","TimerRaise","Notify","Set","Open","Close","NotImplemented","str1","isNaN","n","use_class","module","exports"],"mappings":"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","file":"lib/sakurascript.min.js","sourcesContent":["splitargs = (str) ->\n  str\n    .replace /\"((?:\\\\\\\\|\\\\\"|[^\"])*)\"/g, (all, quoted) -> quoted.replace(/,/g,'\\0')\n    .split /\\s*\\,\\s*/\n    .map (arg) -> arg.replace(/\\0/g, ',').replace(/\\\\(.)/, '$1')\njoinargs = (args) ->\n  args\n    .map (arg) -> arg.replace(/\\\\/, '\\\\\\\\').replace(/\\]/, '\\\\]')\n    .map (arg) -> if /[,\"]/.test(arg) then '\"' + arg.replace(/\"/, '\\\\\"') + '\"' else arg\n    .join ','\n\n# Sakura Script Parser/Builder\nclass SakuraScript\n  # make instance from SakuraScript object\n  # @param json [object] SakuraScript object\n  # @return [SakuraScript] SakuraScript\n  @fromObject: (json) ->\n    tokens = []\n    for token in json\n      tokens.push SakuraScriptToken.fromObject token\n    new SakuraScript tokens\n\n  # make instance from SakuraScript string\n  # @param script [string] SakuraScript string\n  # @return [SakuraScript] SakuraScript\n  @parse: (script) ->\n    tokens = []\n    while script.length\n      tag = null\n      for tag in SakuraScript.tags\n        if tag.re.test(script)\n          break\n      script = script.replace tag.re, (group..., offset, all) =>\n        tokens.push tag.match.call @, group\n        return '' # delete matched\n    new SakuraScript tokens\n\n  # constructor\n  # @param tokens [Array<SakuraScriptToken>] tokens\n  constructor: (@tokens = []) ->\n\n  # make SakuraScript object\n  # @return [object] SakuraScript object\n  toObject: ->\n    for token in @tokens\n      token.toObject()\n\n  # make SakuraScript string\n  # @return [string] SakuraScript string\n  toSakuraScript: ->\n    (token.toSakuraScript() for token in @tokens).join ''\n\nclass SakuraScriptToken\n  # make instance from SakuraScript object\n  # @param json [object] SakuraScript object\n  # @return [SakuraScript] SakuraScript\n  @fromObject: (json) ->\n    instance = new SakuraScriptToken[json.class]()\n    for key in Object.keys(json) when key != \"class\"\n      instance[key] = json[key]\n    instance\n\n  # constructor\n  constructor: () ->\n\n  # make SakuraScript object\n  # @return [object] SakuraScript object\n  toObject: ->\n    class_name = @constructor.toString().slice(9).match(/^[^\\s(]+/)[0]\n    json = {class: class_name}\n    for key in Object.keys(@)\n      json[key] = @[key]\n    json\n\n  # make SakuraScript string\n  # @return [string] SakuraScript string\n  toSakuraScript: -> throw new Error \"not implemented\"\n\n# \\0 \\h \\1 \\u \\p0 \\p[0]\nclass SakuraScriptToken.Scope extends SakuraScriptToken\n  constructor: (@scope, @view) ->\n  toSakuraScript: ->\n    switch @view\n      when \"bracket\"\n        \"\\\\p[#{@scope}]\"\n      when \"nobracket\"\n        \"\\\\p#{@scope}\"\n      else\n        \"\\\\#{@view}\"\n# \\s0 \\s[0]\nclass SakuraScriptToken.Surface extends SakuraScriptToken\n  constructor: (@surface, @view) ->\n  toSakuraScript: ->\n    switch @view\n      when \"bracket\"\n        \"\\\\s[#{@surface}]\"\n      when \"nobracket\"\n        \"\\\\s#{@surface}\"\n# \\s[smile]\nclass SakuraScriptToken.SurfaceAlias extends SakuraScriptToken\n  constructor: (@surface_alias) ->\n  toSakuraScript: -> \"\\\\s[#{joinargs [@surface_alias]}]\"\n# \\b0 \\b[0]\nclass SakuraScriptToken.Balloon extends SakuraScriptToken\n  constructor: (@balloon, @view) ->\n  toSakuraScript: ->\n    switch @view\n      when \"bracket\"\n        \"\\\\b[#{@balloon}]\"\n      when \"nobracket\"\n        \"\\\\b#{@balloon}\"\n# \\i0 \\i[0]\nclass SakuraScriptToken.PlayAnimation extends SakuraScriptToken\n  constructor: (@animation, @view) ->\n  toSakuraScript: ->\n    switch @view\n      when \"bracket\"\n        \"\\\\i[#{@animation}]\"\n      when \"nobracket\"\n        \"\\\\i#{@animation}\"\n# \\i[0,wait]\nclass SakuraScriptToken.PlayAnimationWait extends SakuraScriptToken\n  constructor: (@animation) ->\n  toSakuraScript: -> \"\\\\i[#{@animation},wait]\"\n# \\\\w1\nclass SakuraScriptToken.SimpleWait extends SakuraScriptToken\n  constructor: (@period) ->\n  toSakuraScript: -> \"\\\\w#{@period}\"\n# \\\\_w[1000]\nclass SakuraScriptToken.PreciseWait extends SakuraScriptToken\n  constructor: (@period) ->\n  toSakuraScript: -> \"\\\\_w[#{@period}]\"\n# \\\\__w[1000]\nclass SakuraScriptToken.WaitFromBeginning extends SakuraScriptToken\n  constructor: (@period) ->\n  toSakuraScript: -> \"\\\\__w[#{@period}]\"\n# \\\\__w[clear]\nclass SakuraScriptToken.ResetBeginning extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\__w[clear]\"\n# \\\\__w[animation,0]\nclass SakuraScriptToken.WaitAnimationEnd extends SakuraScriptToken\n  constructor: (@id) ->\n  toSakuraScript: -> \"\\\\__w[animation,#{@id}]\"\n# \\\\_q\nclass SakuraScriptToken.ToggleQuick extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\_q\"\n# \\\\_s \\s[0,1]\nclass SakuraScriptToken.ToggleSynchronize extends SakuraScriptToken\n  constructor: (@scopes = []) ->\n  toSakuraScript: -> \"\\\\_s\" + if @scopes.length then \"[#{joinargs @scopes}]\" else \"\"\n# \\\\t\nclass SakuraScriptToken.TimeCritical extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\t\"\n# \\\\x \\\\x[noclear]\nclass SakuraScriptToken.WaitClick extends SakuraScriptToken\n  constructor: (@noclear = false) ->\n  toSakuraScript: -> \"\\\\x\"\n# \\\\*\nclass SakuraScriptToken.NoChoiceTimeout extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\*\"\n# \\q[text,OnEvent,...]\nclass SakuraScriptToken.EventChoice extends SakuraScriptToken\n  constructor: (@text, @event, @references) ->\n  toSakuraScript: -> \"\\\\q[#{joinargs [@text, @event].concat(@references)}]\"\n# \\q[text,id,...]\nclass SakuraScriptToken.ReferencesChoice extends SakuraScriptToken\n  constructor: (@text, @references) ->\n  toSakuraScript: -> \"\\\\q[#{joinargs [@text].concat(@references)}]\"\n# \\q[text,script:...]\nclass SakuraScriptToken.ScriptChoice extends SakuraScriptToken\n  constructor: (@text, @script) ->\n  toSakuraScript: -> \"\\\\q[#{joinargs [@text, \"script:\" + @script]}]\"\n# \\q[id][text] \\q0[id][text]\nclass SakuraScriptToken.OldReferenceChoice extends SakuraScriptToken\n  constructor: (@text, @reference, @view) ->\n  toSakuraScript: -> \"\\\\q#{@view || ''}[#{joinargs [@reference]}][#{joinargs [@text]}]\"\n# \\\\__q[OnEvent,...]\nclass SakuraScriptToken.BeginEventChoice extends SakuraScriptToken\n  constructor: (@event, @references) ->\n  toSakuraScript: -> \"\\\\__q[#{joinargs [@event].concat(@references)}]\"\n# \\\\__q[id,...]\nclass SakuraScriptToken.BeginReferencesChoice extends SakuraScriptToken\n  constructor: (@references) ->\n  toSakuraScript: -> \"\\\\__q[#{joinargs @references}]\"\n# \\\\__q[script:...]\nclass SakuraScriptToken.BeginScriptChoice extends SakuraScriptToken\n  constructor: (@script) ->\n  toSakuraScript: -> \"\\\\__q[#{joinargs [\"script:\" + @script]}]\"\n# \\\\__q\nclass SakuraScriptToken.EndChoice extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\__q\"\n# \\\\_a[OnEvent,...]\nclass SakuraScriptToken.BeginEventAnchor extends SakuraScriptToken\n  constructor: (@event, @references) ->\n  toSakuraScript: -> \"\\\\_a[#{joinargs [@event].concat(@references)}]\"\n# \\\\_a[id,...]\nclass SakuraScriptToken.BeginReferencesAnchor extends SakuraScriptToken\n  constructor: (@references) ->\n  toSakuraScript: -> \"\\\\_a[#{joinargs @references}]\"\n# \\\\_a[script:...]\nclass SakuraScriptToken.BeginScriptAnchor extends SakuraScriptToken\n  constructor: (@script) ->\n  toSakuraScript: -> \"\\\\_a[#{joinargs [\"script:\" + @script]}]\"\n# \\\\_a\nclass SakuraScriptToken.EndAnchor extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\_a\"\n# \\n\nclass SakuraScriptToken.LineBreak extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\n\"\n# \\n[half]\nclass SakuraScriptToken.HalfLineBreak extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\n[half]\"\n# \\n[100]\nclass SakuraScriptToken.PercentLineBreak extends SakuraScriptToken\n  constructor: (@percent) ->\n  toSakuraScript: -> \"\\\\n[#{@percent}]\"\n# \\\\_n\nclass SakuraScriptToken.ToggleNoAutoLineBreak extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\_n\"\n# \\\\_l[0,0]\nclass SakuraScriptToken.Location extends SakuraScriptToken\n  constructor: (@x, @y) ->\n  toSakuraScript: -> \"\\\\_l[#{[@x, @y].join(',')}]\"\n# \\\\_b[path,0,0,...]\nclass SakuraScriptToken.Image extends SakuraScriptToken\n  constructor: (@path, @x, @y, @args) ->\n  toSakuraScript: -> \"\\\\_b[#{[@path, @x, @y].concat(@args).join(',')}]\"\n# \\\\_b[path,inline,...]\nclass SakuraScriptToken.InlineImage extends SakuraScriptToken\n  constructor: (@path, @x, @y, @args) ->\n  toSakuraScript: -> \"\\\\_b[#{[@path, 'inline'].concat(@args).join(',')}]\"\n# \\f[...]\nclass SakuraScriptToken.Font extends SakuraScriptToken\n  constructor: (@name, @args) ->\n  toSakuraScript: -> \"\\\\f[#{joinargs [@name].concat(@args)}]\"\n# \\\\4\nclass SakuraScriptToken.BeFar extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\4\"\n# \\\\5\nclass SakuraScriptToken.BeNear extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\5\"\n# \\\\c\nclass SakuraScriptToken.Clear extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\c\"\n# \\\\e\nclass SakuraScriptToken.End extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\e\"\n# \\\\z\nclass SakuraScriptToken.OldChoiceEnd extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\z\"\n# \\\\__c\nclass SakuraScriptToken.OpenCommunicateBox extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\__c\"\n# \\\\__t\nclass SakuraScriptToken.OpenTeachBox extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\__t\"\n# \\\\-\nclass SakuraScriptToken.Halt extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\-\"\n# \\\\![*]\nclass SakuraScriptToken.Marker extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\![*]\"\n# a char\nclass SakuraScriptToken.Char extends SakuraScriptToken\n  constructor: (@raw_char) -> if @raw_char then @char = @raw_char.replace(/</, '&lt;').replace(/>/, '&gt;').replace(/&/, '&amp;')\n  toSakuraScript: -> @raw_char\n# \\\\\\\\\nclass SakuraScriptToken.EscapeChar extends SakuraScriptToken.Char\n  constructor: -> @char = \"\\\\\"\n  toSakuraScript: -> \"\\\\\\\\\"\n# \\\\_u[0x01]\nclass SakuraScriptToken.UCSChar extends SakuraScriptToken.Char\n  constructor: (@code_point) -> @char = \"&##{@code_point};\"\n  toSakuraScript: -> \"\\\\_u[0x#{@code_point.toString(16)}]\"\n# \\\\_m[0x01]\nclass SakuraScriptToken.AsciiChar extends SakuraScriptToken.Char\n  constructor: (@code_point) -> @char = \"&##{@code_point};\"\n  toSakuraScript: -> \"\\\\_m[0x#{@code_point.toString(16)}]\"\n# \\\\&[amp]\nclass SakuraScriptToken.EntityChar extends SakuraScriptToken.Char\n  constructor: (@entity) -> @char = \"&#{@entity};\"\n  toSakuraScript: -> \"\\\\&[#{@entity}]\"\n# \\\\![anim,...]\nclass SakuraScriptToken.Animation extends SakuraScriptToken\n  constructor: (@command, @id, @args) ->\n  toSakuraScript: -> \"\\\\![anim,#{joinargs [@command, @id].concat(@args)}]\"\n# \\\\![bind,...]\nclass SakuraScriptToken.Bind extends SakuraScriptToken\n  constructor: (@category, @parts, @dress_up) ->\n  toSakuraScript: -> \"\\\\![bind,#{joinargs [@category, @parts].concat(if @dress_up? then [Number(@dress_up)] else [])}]\"\n# \\\\![lock,paint]\nclass SakuraScriptToken.LockRepaint extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\![lock,repaint]\"\n# \\\\![unlock,paint]\nclass SakuraScriptToken.UnlockRepaint extends SakuraScriptToken\n  constructor: ->\n  toSakuraScript: -> \"\\\\![unlock,repaint]\"\n# \\\\![move,...]\nclass SakuraScriptToken.Move extends SakuraScriptToken\n  constructor: (@x, @y, @duration, @origin_type, @source_origin, @target_origin) ->\n  toSakuraScript: -> \"\\\\![move,#{joinargs [@x, @y, @duration, @origin_type, @source_origin, @target_origin]}]\"\n# \\\\![moveasync,...]\nclass SakuraScriptToken.MoveAsync extends SakuraScriptToken.Move\n  toSakuraScript: -> \"\\\\![moveasync,#{joinargs [@x, @y, @duration, @origin_type, @source_origin, @target_origin]}]\"\n# \\\\![moveasync,cancel]\nclass SakuraScriptToken.MoveAsyncCancel extends SakuraScriptToken.Move\n  constructor: ->\n  toSakuraScript: -> \"\\\\![moveasync,cancel]\"\n# \\\\![raise,...]\nclass SakuraScriptToken.Raise extends SakuraScriptToken\n  constructor: (@event, @references) ->\n  toSakuraScript: -> \"\\\\![raise,#{joinargs [@event].concat(@references)}]\"\n# \\\\![timerraise,...]\nclass SakuraScriptToken.TimerRaise extends SakuraScriptToken\n  constructor: (@event, @references) ->\n  toSakuraScript: -> \"\\\\![timerraise,#{joinargs [@event].concat(@references)}]\"\nclass SakuraScriptToken.Notify extends SakuraScriptToken\n  constructor: (@event, @references) ->\n  toSakuraScript: -> \"\\\\![notify,#{joinargs [@event].concat(@references)}]\"\n# \\\\![set,...]\nclass SakuraScriptToken.Set extends SakuraScriptToken\n  constructor: (@id, @args) ->\n  toSakuraScript: -> \"\\\\![set,#{joinargs [@id].concat(@args)}]\"\n# \\\\![open,...]\nclass SakuraScriptToken.Open extends SakuraScriptToken\n  constructor: (@command, @args) ->\n  toSakuraScript: -> \"\\\\![open,#{joinargs [@command].concat(@args)}]\"\n# \\\\![close,...]\nclass SakuraScriptToken.Close extends SakuraScriptToken\n  constructor: (@command, @args) ->\n  toSakuraScript: -> \"\\\\![close,#{joinargs [@command].concat(@args)}]\"\n# not impremented tags\nclass SakuraScriptToken.NotImplemented extends SakuraScriptToken\n  constructor: (@str) ->\n  toSakuraScript: -> @str\n\nSakuraScript.tags = [\n  {re: /^\\\\([h0])/, match: (group) -> new SakuraScriptToken.Scope 0, group[1]}\n  {re: /^\\\\([u1])/, match: (group) -> new SakuraScriptToken.Scope 1, group[1]}\n  {re: /^\\\\p\\[(\\d+)\\]/, match: (group) -> new SakuraScriptToken.Scope Number(group[1]), \"bracket\"}\n  {re: /^\\\\p(\\d)/, match: (group) -> new SakuraScriptToken.Scope Number(group[1]), \"nobracket\"}\n  {re: /^\\\\s(\\d)/, match: (group) -> new SakuraScriptToken.Surface Number(group[1]), \"nobracket\"}\n  {re: /^\\\\s\\[([^\\]]+)\\]/, match: (group) -> if isNaN(group[1]) then new SakuraScriptToken.SurfaceAlias group[1] else new SakuraScriptToken.Surface Number(group[1]), \"bracket\"}\n  {re: /^\\\\b(\\d)/, match: (group) -> new SakuraScriptToken.Balloon Number(group[1]), \"nobracket\"}\n  {re: /^\\\\b\\[([^\\]]+)\\]/, match: (group) -> new SakuraScriptToken.Balloon Number(group[1]), \"bracket\"}\n  {re: /^\\\\i(\\d)/, match: (group) -> new SakuraScriptToken.PlayAnimation Number(group[1]), \"nobracket\"}\n  {re: /^\\\\i\\[(\\d+)\\]/, match: (group) -> new SakuraScriptToken.PlayAnimation Number(group[1]), \"bracket\"}\n  {re: /^\\\\i\\[(\\d+),wait\\]/, match: (group) -> new SakuraScriptToken.PlayAnimationWait Number(group[1])}\n  {re: /^\\\\w(\\d)/, match: (group) -> new SakuraScriptToken.SimpleWait Number group[1]}\n  {re: /^\\\\_w\\[(\\d+)\\]/, match: (group) -> new SakuraScriptToken.PreciseWait Number group[1]}\n  {re: /^\\\\__w\\[animation,(\\d+)\\]/, match: (group) -> new SakuraScriptToken.WaitAnimationEnd Number group[1]}\n  {re: /^\\\\__w\\[clear\\]/, match: (group) -> new SakuraScriptToken.ResetBeginning()}\n  {re: /^\\\\__w\\[(\\d+)\\]/, match: (group) -> new SakuraScriptToken.WaitFromBeginning Number group[1]}\n  {re: /^\\\\_q/, match: (group) -> new SakuraScriptToken.ToggleQuick()}\n  {re: /^\\\\_s\\[([^\\]]+)\\]/, match: (group) -> new SakuraScriptToken.ToggleSynchronize splitargs(group[1]).map (n) -> Number(n)}\n  {re: /^\\\\_s/, match: (group) -> new SakuraScriptToken.ToggleSynchronize()}\n  {re: /^\\\\t/, match: (group) -> new SakuraScriptToken.TimeCritical()}\n  {re: /^\\\\x(\\[noclear\\])?/, match: (group) -> new SakuraScriptToken.WaitClick(!!group[1]) }\n  {re: /^\\\\\\*/, match: (group) -> new SakuraScriptToken.NoChoiceTimeout()}\n  {re: /^\\\\q\\[((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) ->\n    args = splitargs(group[1])\n    if /^On/.test args[1]\n      new SakuraScriptToken.EventChoice args[0], args[1], args.slice(2)\n    else if /^script:/.test args[1]\n      new SakuraScriptToken.ScriptChoice args[0], args[1].replace(/^script:/, '')\n    else\n      new SakuraScriptToken.ReferencesChoice args[0], args.slice(1)\n  }\n  {re: /^\\\\__q\\[((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) ->\n    args = splitargs(group[1])\n    if /^On/.test args[0]\n      new SakuraScriptToken.BeginEventChoice args[0], args.slice(1)\n    else if /^script:/.test args[0]\n      new SakuraScriptToken.BeginScriptChoice args[0].replace(/^script:/, '')\n    else\n      new SakuraScriptToken.BeginReferencesChoice args\n  }\n  {re: /^\\\\__q/, match: (group) -> new SakuraScriptToken.EndChoice()}\n  {re: /^\\\\q(\\d*)\\[((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]\\[((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> new SakuraScriptToken.OldReferenceChoice group[3], group[2], group[1]}\n  {re: /^\\\\_a\\[((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) ->\n    args = splitargs(group[1])\n    if /^On/.test args[0]\n      new SakuraScriptToken.BeginEventAnchor args[0], args.slice(1)\n    else if /^script:/.test args[0]\n      new SakuraScriptToken.BeginScriptAnchor args[0].replace(/^script:/, '')\n    else\n      new SakuraScriptToken.BeginReferencesAnchor args\n  }\n  {re: /^\\\\_a/, match: (group) -> new SakuraScriptToken.EndAnchor()}\n  {re: /^\\\\n\\[half\\]/, match: (group) -> new SakuraScriptToken.HalfLineBreak()}\n  {re: /^\\\\n\\[(\\d+)\\]/, match: (group) -> new SakuraScriptToken.PercentLineBreak Number(group[1])}\n  {re: /^\\\\n/, match: (group) -> new SakuraScriptToken.LineBreak()}\n  {re: /^\\\\_n/, match: (group) -> new SakuraScriptToken.ToggleNoAutoLineBreak()}\n  {re: /^\\\\_l\\[([^\\]]+)\\]/, match: (group) -> [x, y] = splitargs(group[1]); new SakuraScriptToken.Location x, y}\n  {re: /^\\\\_b\\[((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) ->\n    args = splitargs(group[1])\n    if args[1] == \"inline\"\n      new SakuraScriptToken.InlineImage args[0], args.slice(2)\n    else\n      new SakuraScriptToken.Image args[0], args[1], args[2], args.slice(3)\n  }\n  {re: /^\\\\f\\[([^\\]]+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Font args[0], args.slice(1)}\n  {re: /^\\\\4/, match: (group) -> new SakuraScriptToken.BeFar()}\n  {re: /^\\\\5/, match: (group) -> new SakuraScriptToken.BeNear()}\n  {re: /^\\\\c/, match: (group) -> new SakuraScriptToken.Clear()}\n  {re: /^\\\\e/, match: (group) -> new SakuraScriptToken.End()}\n  {re: /^\\\\z/, match: (group) -> new SakuraScriptToken.OldChoiceEnd()}\n  {re: /^\\\\-/, match: (group) -> new SakuraScriptToken.Halt()}\n  {re: /^\\\\\\\\/, match: (group) -> new SakuraScriptToken.EscapeChar()}\n  {re: /^\\\\!\\[anim,((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Animation args[0], args[1], args.slice(2)}\n  {re: /^\\\\!\\[bind,((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Bind args[0], args[1], if args[2]? then Number(args[2]) == 1 else null}\n  {re: /^\\\\!\\[moveasync,cancel\\]/, match: (group) -> new SakuraScriptToken.MoveAsyncCancel()}\n  {re: /^\\\\!\\[move(async)?,((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) ->\n    use_class = if group[1] then SakuraScriptToken.MoveAsync else SakuraScriptToken.Move\n    args = splitargs(group[2])\n    new use_class args[0], args[1], args[2], args[3], args[4], args[5]\n  }\n  {re: /^\\\\!\\[lock,repaint\\]/, match: (group) -> new SakuraScriptToken.LockRepaint()}\n  {re: /^\\\\!\\[unlock,repaint\\]/, match: (group) -> new SakuraScriptToken.UnlockRepaint()}\n  {re: /^\\\\!\\[set,((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Set args[0], args.slice(1)}\n  {re: /^\\\\!\\[open,((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Open args[0], args.slice(1)}\n  {re: /^\\\\!\\[close,((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Close args[0], args.slice(1)}\n  {re: /^\\\\__c/, match: (group) -> new SakuraScriptToken.OpenCommunicateBox()}\n  {re: /^\\\\__t/, match: (group) -> new SakuraScriptToken.OpenTeachBox()}\n  {re: /^\\\\!\\[\\s*raise\\s*,\\s*((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Raise args[0], args.slice(1)}\n  {re: /^\\\\!\\[\\s*timerraise\\s*,\\s*((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.TimerRaise args[0], args.slice(1)}\n  {re: /^\\\\!\\[\\s*notify\\s*,\\s*((?:\\\\\\\\|\\\\\\]|[^\\]])+)\\]/, match: (group) -> args = splitargs(group[1]); new SakuraScriptToken.Notify args[0], args.slice(1)}\n  {re: /^\\\\!\\[\\*\\]/, match: (group) -> new SakuraScriptToken.Marker()}\n  {re: /^\\\\_u\\[([A-Fa-fXx0-9]+)\\]/, match: (group) -> new SakuraScriptToken.UCSChar Number(group[1])}\n  {re: /^\\\\_m\\[([A-Fa-fXx0-9]+)\\]/, match: (group) -> new SakuraScriptToken.AsciiChar Number(group[1])}\n  {re: /^\\\\&\\[([A-Za-z0-9]+)\\]/, match: (group) -> new SakuraScriptToken.EntityChar group[1]}\n  {re: /^\\\\[C67+v8]/, match: (group) -> new SakuraScriptToken.NotImplemented group[0]} # not implemented quick\n  {re: /^\\\\_[+V]/, match: (group) -> new SakuraScriptToken.NotImplemented group[0]} # not implemented quick\n  {re: /^\\\\[8j]\\[.*?\\]/, match: (group) -> new SakuraScriptToken.NotImplemented group[0]} # not implemented quick\n  {re: /^\\\\_[!?v]\\[.*?\\]/, match: (group) -> new SakuraScriptToken.NotImplemented group[0]} # not implemented quick\n  {re: /^\\\\!\\[.*?\\]/, match: (group) -> new SakuraScriptToken.NotImplemented group[0]} # not implemented quick\n  {re: /^./, match: (group) -> new SakuraScriptToken.Char group[0]}\n]\n\nif module?.exports?\n  module.exports =\n    SakuraScript: SakuraScript\n    SakuraScriptToken: SakuraScriptToken\nelse\n  @SakuraScript = SakuraScript\n  @SakuraScriptToken = SakuraScriptToken\n",null],"sourceRoot":"/source/"}